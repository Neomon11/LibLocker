# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ —Å–µ—Å—Å–∏–∏ - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

### –ë–∞–≥ 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–µ—Å—Å–∏–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–µ—Å–ø–ª–∞—Ç–Ω—É—é —Å–µ—Å—Å–∏—é –Ω–µ–ª—å–∑—è –±—ã–ª–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –ø–ª–∞—Ç–Ω—É—é (–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç) –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è `SESSION_TARIFF_UPDATE` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏
- –°–µ—Ä–≤–µ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç—É
- –ö–ª–∏–µ–Ω—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ç–∞–π–º–µ—Ä–µ
- –í GUI —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–±–∞–≤–ª–µ–Ω –ø—É–Ω–∫—Ç –º–µ–Ω—é "üí∞ –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏" (–ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ)

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
1. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –º—ã—à–∏ –ø–æ –∫–ª–∏–µ–Ω—Ç—É —Å –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–µ–π
2. –í—ã–±–µ—Ä–∏—Ç–µ "üí∞ –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏"
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ/—Å–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É "–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è —Å–µ—Å—Å–∏—è"
4. –£–∫–∞–∂–∏—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ —Ä—É–±./—á–∞—Å –¥–ª—è –ø–ª–∞—Ç–Ω–æ–π —Å–µ—Å—Å–∏–∏
5. –ù–∞–∂–º–∏—Ç–µ OK

### –ë–∞–≥ 2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Å—Å–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–µ—Å—Å–∏–∏, –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è –æ—Ç—Å—á–∏—Ç—ã–≤–∞–ª–æ—Å—å –æ—Ç –Ω–∞—á–∞–ª–∞ —Å–µ—Å—Å–∏–∏, –∞ –Ω–µ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞.

**–ü—Ä–∏–º–µ—Ä:**
- –°–µ—Å—Å–∏—è –Ω–∞—á–∞–ª–∞—Å—å –≤ 10:00 –Ω–∞ 60 –º–∏–Ω—É—Ç (–∫–æ–Ω–µ—Ü –≤ 11:00)
- –í 10:10 –∞–¥–º–∏–Ω –º–µ–Ω—è–µ—Ç –≤—Ä–µ–º—è –Ω–∞ 30 –º–∏–Ω—É—Ç
- **–î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:** –∫–æ–Ω–µ—Ü –≤ 10:30 ‚Üí –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ 20 –º–∏–Ω—É—Ç ‚ùå
- **–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:** –∫–æ–Ω–µ—Ü –≤ 10:40 ‚Üí –æ—Å—Ç–∞—ë—Ç—Å—è 30 –º–∏–Ω—É—Ç ‚úÖ

**–†–µ—à–µ–Ω–∏–µ:**
- –ò–∑–º–µ–Ω–µ–Ω —Ä–∞—Å—á–µ—Ç `end_time` –≤ `TimerWidget.update_session_time()`
- –¢–µ–ø–µ—Ä—å: `end_time = —Ç–µ–∫—É—â–µ–µ_–≤—Ä–µ–º—è + –Ω–æ–≤–∞—è_–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å`
- –†–∞–Ω—å—à–µ –±—ã–ª–æ: `end_time = –≤—Ä–µ–º—è_–Ω–∞—á–∞–ª–∞ + –Ω–æ–≤–∞—è_–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã:
- ‚úÖ `test_session_tariff_update.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (6 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ `test_session_time_logic.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ (–≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏)
- ‚úÖ `test_session_time_update.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (4 —Ç–µ—Å—Ç–∞)

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!

## –ü—Ä–æ–≤–µ—Ä–∫–∏

- ‚úÖ **Code review:** –∑–∞–≤–µ—Ä—à–µ–Ω, 1 –º–µ–ª–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ **Security check (CodeQL):** 0 —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–û–±–∞ –±–∞–≥–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
1. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏
2. –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–∏ (`actual_duration`) —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
- –°—Ç–∞—Ä—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–ø—Ä–æ—Å—Ç–æ –Ω–µ –ø–æ–ª—É—á–∞—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏)

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `src/shared/protocol.py` - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è SESSION_TARIFF_UPDATE
2. `src/server/server.py` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ update_session_tariff()
3. `src/server/gui.py` - –¥–æ–±–∞–≤–ª–µ–Ω UI –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. `src/client/client.py` - –¥–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
5. `src/client/gui.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∏, –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

## –ò—Ç–æ–≥

‚úÖ –û–±–∞ –±–∞–≥–∞ —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ GUI
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ `SESSION_BUG_FIXES_SUMMARY.md` (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º).
